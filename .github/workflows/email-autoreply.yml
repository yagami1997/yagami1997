name: Auto Reply to Email Requests

on:
  issues:
    types: [opened]

permissions:
  issues: write
  contents: read

jobs:
  auto-reply:
    runs-on: ubuntu-latest
    if: contains(github.event.issue.title, 'Email Request')
    steps:
      - name: Auto Reply to Email Request
        uses: actions/github-script@v6
        with:
          script: |
            const issueNumber = context.issue.number;
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: `## 🔐 Secure Communication Channel

Thank you for reaching out! To be honest, it takes some effort to get my GPG email information. Let's Rock!

### 📧 Email Address:
\`\`\`
isaac787.mo@gmail.com
\`\`\`

### 🔑 GPG Key Instructions:
\`\`\`bash
# Import my public key from keyserver
gpg --keyserver hkps://keys.openpgp.org --recv-keys D22BC844F1646033

# Verify fingerprint before sending sensitive data
gpg --fingerprint D22BC844F1646033
\`\`\`

![End-to-End Encrypted](https://img.shields.io/badge/E2E-Encrypted-00C853?style=flat-square&logo=gnuprivacyguard&logoColor=white)

_This is an automated response. I'll close this issue shortly to keep things tidy._`
            });
            
            // Close the issue
            await github.rest.issues.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              state: 'closed'
            });
