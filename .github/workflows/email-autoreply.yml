name: Auto Reply to Email Requests

on:
  issues:
    types: [opened]

permissions:
  issues: write
  contents: read

jobs:
  auto-reply:
    runs-on: ubuntu-latest
    if: contains(github.event.issue.title, 'Email Request')
    steps:
      - name: Auto Reply to Email Request
        uses: actions/github-script@v6
        with:
          script: |
            const issueNumber = context.issue.number;
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: "Thank you for reaching out! To be honest, it takes some effort to get my GPG email information. Let's Rock!\n\nEmail Address: isaac787.mo@gmail.com\n\nGPG Key Instructions:\n```\n# Import my public key from keyserver\ngpg --keyserver hkps://keys.openpgp.org --recv-keys D22BC844F1646033\n\n# Verify fingerprint before sending sensitive data\ngpg --fingerprint D22BC844F1646033\n```\n\nThis is an automated response. I'll close this issue shortly to keep things tidy. Note that the issue will remain in the repository history but won't appear in the active issues list."
            });
            
            // Close the issue
            await github.rest.issues.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              state: 'closed'
            });
