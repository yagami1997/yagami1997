name: Auto Reply to Email Requests

on:
  issues:
    types: [opened]

permissions:
  issues: write
  contents: read

jobs:
  auto-reply:
    runs-on: ubuntu-latest
    if: contains(github.event.issue.title, 'Email Request')
    steps:
      - name: Auto Reply to Email Request
        uses: actions/github-script@v6
        with:
          script: |
            const issueNumber = context.issue.number;
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: `<div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border-radius: 10px; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; box-shadow: 0 10px 20px rgba(0,0,0,0.2);">
              
              <h2 style="text-align: center; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 15px; margin-top: 5px;">ğŸ” Secure Communication Channel ğŸ”</h2>
              
              <p style="font-size: 15px; line-height: 1.6; margin-bottom: 20px;">Thank you for reaching out! To be honest, it takes some effort to get my GPG email information. Let's Rock!</p>
              
              <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                <p style="font-weight: bold; margin-bottom: 10px;">ğŸ“§ Email Address:</p>
                <code style="display: block; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px; font-family: monospace; color: #2ecc71;">isaac787.mo@gmail.com</code>
              </div>
              
              <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px;">
                <p style="font-weight: bold; margin-bottom: 10px;">ğŸ”‘ GPG Key Instructions:</p>
                <pre style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 5px; font-family: monospace; overflow-x: auto; color: #f8f9fa;">
# Import my public key from keyserver
gpg --keyserver hkps://keys.openpgp.org --recv-keys D22BC844F1646033

# Verify fingerprint before sending sensitive data
gpg --fingerprint D22BC844F1646033</pre>
              </div>
              
              <p style="font-size: 14px; text-align: center; margin-top: 20px; opacity: 0.7;">This is an automated response. I'll close this issue shortly to keep things tidy.</p>
              
              <div style="text-align: center; margin-top: 20px;">
                <img src="https://img.shields.io/badge/E2E-Encrypted-00C853?style=flat-square&logo=gnuprivacyguard&logoColor=white" alt="End-to-End Encrypted" />
              </div>
              </div>`
            });
            
            // Close the issue
            await github.rest.issues.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              state: 'closed'
            });
